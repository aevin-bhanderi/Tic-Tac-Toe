<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tic Tac Toe Tournament</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      display: flex; justify-content: center; align-items: center;
      min-height: 100vh; background: linear-gradient(135deg,#6a11cb,#2575fc);
      font-family: 'Segoe UI', sans-serif; color: #fff; padding: 20px;
    }
    .container { text-align: center; width: 100%; max-width: 600px; }

    h1 { margin-bottom: 15px; font-size: clamp(1.5rem, 2.5vw, 2rem); }

    .setup {
      background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px;
      margin-bottom: 20px; display: flex; flex-direction: column; gap: 10px;
    }

    input, select {
      padding: 8px; border-radius: 5px; border: none; width: 100%;
      font-size: 1rem; outline: none;
    }

    .btn {
      margin-top: 10px; padding: 10px 20px; font-size: 1rem;
      background: #ff9800; border: none; border-radius: 5px;
      cursor: pointer; color: #fff; transition: 0.3s;
    }
    .btn:hover { background: #f57c00; }

    .board {
      display: grid; grid-template-columns: repeat(3, 1fr);
      gap: 10px; margin: 20px auto; max-width: 350px;
    }
    .cell {
      background: #fff; color: #333; aspect-ratio: 1/1;
      display: flex; justify-content: center; align-items: center;
      font-size: clamp(1.5rem, 6vw, 2.5rem); font-weight: bold;
      cursor: pointer; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      transition: transform 0.2s ease, background 0.3s ease;
    }
    .cell:hover { transform: scale(1.05); background: #f1f1f1; }

    .winner { margin: 15px 0; font-size: 1.2rem; font-weight: bold; color: #ffeb3b; min-height: 25px; }

    .scoreboard {
      display: flex; justify-content: space-around; margin-top: 10px;
      font-size: 1rem; background: rgba(255,255,255,0.1); padding: 10px; border-radius: 10px;
    }

    .history {
      margin-top: 15px; background: rgba(255,255,255,0.1);
      padding: 10px; border-radius: 10px; max-height: 150px; overflow-y: auto;
      font-size: 0.9rem; text-align: left;
    }

    @media (max-width: 500px) {
      .board { gap: 8px; }
      .cell { font-size: 1.8rem; }
      .scoreboard { flex-direction: column; gap: 5px; text-align: center; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Tic Tac Toe Tournament</h1>

    <!-- Setup Section -->
    <div class="setup">
      <label>Choose Game Mode:</label>
      <select id="gameMode">
        <option value="pvp">Player vs Player</option>
        <option value="pvc">Player vs Computer</option>
      </select>
      <input type="text" id="player1" placeholder="Enter Player 1 Name" />
      <input type="text" id="player2" placeholder="Enter Player 2 Name (or leave for Computer)" />
      <label style="margin-top:5px;">Choose Symbol:</label>
      <select id="playerSymbol">
        <option value="X">Player 1 = X, Player 2/Computer = O</option>
        <option value="O">Player 1 = O, Player 2/Computer = X</option>
      </select>
      <button class="btn" id="startBtn">Start Game</button>
    </div>

    <!-- Game Board -->
    <div class="board" id="board" style="display:none;"></div>
    <div class="winner" id="winnerText"></div>

    <!-- Scoreboard -->
    <div class="scoreboard" id="scoreboard" style="display:none;">
      <div id="p1Score">Player 1: 0</div>
      <div id="p2Score">Player 2: 0</div>
      <div id="draws">Draws: 0</div>
    </div>

    <!-- History -->
    <div class="history" id="history" style="display:none;">
      <strong>Match History:</strong><br>
    </div>

    <button class="btn" id="restartBtn" style="display:none;">Restart Round</button>
  </div>

  <script>
    const board = document.getElementById("board");
    const winnerText = document.getElementById("winnerText");
    const restartBtn = document.getElementById("restartBtn");
    const startBtn = document.getElementById("startBtn");
    const player1Input = document.getElementById("player1");
    const player2Input = document.getElementById("player2");
    const symbolSelect = document.getElementById("playerSymbol");
    const gameModeSelect = document.getElementById("gameMode");
    const p1ScoreEl = document.getElementById("p1Score");
    const p2ScoreEl = document.getElementById("p2Score");
    const drawsEl = document.getElementById("draws");
    const historyEl = document.getElementById("history");
    const scoreboard = document.getElementById("scoreboard");

    let currentPlayer, p1Symbol, p2Symbol, gameMode;
    let gameActive = false;
    let gameState = ["", "", "", "", "", "", "", "", ""];
    let scores = { p1: 0, p2: 0, draw: 0 };
    let player1, player2;

    const winningConditions = [
      [0,1,2],[3,4,5],[6,7,8],
      [0,3,6],[1,4,7],[2,5,8],
      [0,4,8],[2,4,6]
    ];

    function startGame() {
      gameMode = gameModeSelect.value;
      player1 = player1Input.value || "Player 1";
      player2 = (gameMode === "pvc") ? "Computer" : (player2Input.value || "Player 2");
      p1Symbol = symbolSelect.value;
      p2Symbol = p1Symbol === "X" ? "O" : "X";
      currentPlayer = p1Symbol;
      gameActive = true;
      document.querySelector(".setup").style.display = "none";
      board.style.display = "grid";
      restartBtn.style.display = "block";
      scoreboard.style.display = "flex";
      historyEl.style.display = "block";
      createBoard();
    }

    function createBoard() {
      board.innerHTML = "";
      gameState = ["", "", "", "", "", "", "", "", ""];
      winnerText.innerText = "";
      gameActive = true;
      for (let i = 0; i < 9; i++) {
        const cell = document.createElement("div");
        cell.classList.add("cell");
        cell.setAttribute("data-index", i);
        cell.addEventListener("click", handleCellClick);
        board.appendChild(cell);
      }
    }

    function handleCellClick(e) {
      const index = e.target.getAttribute("data-index");
      if (gameState[index] !== "" || !gameActive) return;
      makeMove(index, currentPlayer);

      if (gameMode === "pvc" && gameActive && currentPlayer === p2Symbol) {
        setTimeout(computerMove, 500); // Small delay for realism
      }
    }

    function makeMove(index, player) {
      gameState[index] = player;
      document.querySelector(`[data-index='${index}']`).innerText = player;

      if (checkWinner()) {
        const winnerName = player === p1Symbol ? player1 : player2;
        winnerText.innerText = `ðŸŽ‰ ${winnerName} Wins!`;
        if (winnerName === player1) scores.p1++;
        else scores.p2++;
        updateScoreboard();
        addHistory(`${winnerName} won this round`);
        gameActive = false;
        return;
      }

      if (!gameState.includes("")) {
        winnerText.innerText = "It's a Draw! ðŸ¤";
        scores.draw++;
        updateScoreboard();
        addHistory(`Round ended in a draw`);
        gameActive = false;
        return;
      }

      currentPlayer = (player === p1Symbol) ? p2Symbol : p1Symbol;
    }

    function computerMove() {
      let emptyCells = gameState.map((val, i) => val === "" ? i : null).filter(i => i !== null);
      if (emptyCells.length === 0) return;
      let randomIndex = emptyCells[Math.floor(Math.random() * emptyCells.length)];
      makeMove(randomIndex, p2Symbol);
    }

    function checkWinner() {
      for (const [a,b,c] of winningConditions) {
        if (gameState[a] && gameState[a] === gameState[b] && gameState[a] === gameState[c]) {
          return true;
        }
      }
      return false;
    }

    function updateScoreboard() {
      p1ScoreEl.innerText = `${player1}: ${scores.p1}`;
      p2ScoreEl.innerText = `${player2}: ${scores.p2}`;
      drawsEl.innerText = `Draws: ${scores.draw}`;
    }

    function addHistory(result) {
      const entry = document.createElement("div");
      entry.innerText = result;
      historyEl.appendChild(entry);
    }

    startBtn.addEventListener("click", startGame);
    restartBtn.addEventListener("click", createBoard);
  </script>
</body>
</html>
